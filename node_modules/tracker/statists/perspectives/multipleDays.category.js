/**
 * time category
 *
 * first: creative activities, like work, study, thinking, meditation, sport
 * second: shopping, eatting
 * third: normal thing,like watch drama
 *
 * the reason to calculate category time is to optimize my time usage, spent the time in the most valuable thing.
 */
'use strict';

var _ = require('lodash');

exports.focus = function (options, scanResult) {
    var days = scanResult.days;
    var total = 0;
    var categoryTime = {};
    days.forEach(function (day) {
        var category = day.categoryPerspective;
        if (category.total) {
            total += category.total;
        }
        var categoryData = category.categoryTime;
        if (!_.isEmpty(categoryData)) {
            Object.keys(categoryData).forEach(function (key) {
                if (categoryTime[key] === undefined) {
                    categoryTime[key] = categoryData[key];
                } else {
                    categoryTime[key] += categoryData[key];
                }
            });
        }
    });

    return {
        categoryTime: categoryTime,
        total: total
    };
};
