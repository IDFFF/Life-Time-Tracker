'use strict';
var _ = require('lodash');

exports.focus = function (options, data) {
    var sportTypeTime = [];
    var time = 0, count = 0;
    data.days.forEach(function (day) {
        var sportPerspective = day.sportPerspective;
        if (sportPerspective) {
            time += sportPerspective.time;
            count += sportPerspective.count;
            if (!_.isEmpty(sportPerspective.sportTypeTime)) {
                sportPerspective.sportTypeTime.forEach(
                    function (sportTarget) {
                        var find = sportTypeTime.some(function (sport) {
                            if (sportTarget.type.en === sport.type.en) {
                                sport.count += sportTarget.count;
                                return true;
                            }
                            return false;
                        });
                        if (!find) {
                            sportTypeTime.push(sportTarget);
                        }
                    }
                );
            }
        }
    });
    return {
        time: time,
        count: count,
        sportTypeTime: sportTypeTime
    };
};

