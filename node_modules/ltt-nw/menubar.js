/**
 * client menubar
 */
var gui = window.require('nw.gui');
var _ = require('lodash');

var Menubar = function (menus) {
    // Create a menubar for window menu
    var menubar = new gui.Menu({
        type: 'menubar'
    });


    menus.forEach(function (menu) {
        var name = menu.name;
        var submenu = new gui.Menu();
        var items = menu.items;
        if (!_.isEmpty(items)) {
            items.forEach(function (item) {
                submenu.append(new gui.MenuItem({
                    label: item.name,
                    click: item.handler
                }));
            });
        }
        menubar.append(new gui.MenuItem({
            label: name,
            submenu: submenu
        }));
    });

    return menubar;
};

module.exports = Menubar;